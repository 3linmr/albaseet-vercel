# نظام الموافقات

## فوائد نظام الموافقات
الموافقات في نظام witsUP هي آلية إدارية لتعريف الأطراف المخوّلة بالمراجعة والمصادقة على المستندات قبل اعتمادها النهائي، لضمان أن المستندات المالية والإدارية تمت مراجعتها من الأطراف المختصة قبل تنفيذها.

## تأسيس الموافقات
3 خطوات يجب تنفيذها لتشغيل الموافقات وتنفيذها بشكل كامل وصحيح:

### الخطوة الأولى (تعريف الموافقات ومراحلها)
وتنفذ كالتالي:
من القائمة الرئيسية في نظام witsUP
- اختر الموافقات
- ثم تعريف الموافقات ومراحلها

#### إضافة موافقة جديدة
- اضغط على زر إضافة جديد.
- أدخل البيانات المطلوبة:
  - اختر المستند الذي ستطبّق عليه الموافقة (مثل: فاتورة، عرض سعر، قيد…) من القائمة المنسدلة والتي تحتوي أسماء جميع السندات.
  - سجل اسم الموافقة بالعربية والإنجليزية.
  - تحديد متى تعمل الموافقة: عند الإضافة / التعديل / الحذف.

#### تعريف المراحل
لكل موافقة يمكن إنشاء عدة مراحل، وكل مرحلة تحتوي على:
- ترتيب المرحلة (الأولى، الثانية…).
- المستوى أو القسم المطلوب للموافقة.
- المستخدمين أو المسؤولين المكلّفين بالموافقة.
- عدد الموافقات المطلوب وهو عدد الموافقين الذي يجب تحققه للانتقال إلى المرحلة التالية.
- الحالة (مفعل / غير مفعل)

#### الحفظ
- بعد إدخال المراحل المطلوبة ➝ اضغط على حفظ.

#### آلية عملها بعد التأسيس
- ينتقل المستند تلقائيًا من مرحلة إلى أخرى عند بلوغ العدد المقرر من الموافقات.
- إذا رفض أي عضو في أي مرحلة ➝ يتم إيقاف المسار بالكامل واعتبار المستند مرفوضًا.

### الخطوة الثانية (منح الصلاحيات للموافقة / الرفض على الطلبات)
- من الشاشة الرئيسة لنظام witsUP يتم الدخول إلى قسم (إدارة النظام) (تجد أيقونة في الجانب الأيسر من الشاشة)
- اختيار صلاحيات المستخدم
- اختيار مستخدم لكي يكون عضواً (له حق القبول/الرفض) في الموافقة التي سيتم تحديدها
- اختيار عنوان (الموافقات) من قائمة الصلاحيات التي تظهر في الأسفل
- ستنبثق نافذة فيها قائمة بأسماء الموافقات؛ تختار منها اسم الموافقة التي سيعين لها المستخدم
- حينئذ تظهر قائمة بالمراحل التي تخص تلك الموافقة (والتي سبق تسجيلها في الخطوة الأولى)
- تختار المرحلة التي سيتم تعيينها لهذا المستخدم
- تقوم بتعيين المستخدم لهذه المرحلة
- تضغط على زر الحفظ

**ملاحظة**: يمكن تعيين نفس المستخدم لأي عدد من الموافقات ولأي عدد من المراحل، لكن لا يسمح بتعيين نفس المستخدم أكثر من مرة واحدة لنفس المرحلة.

### الخطوة الثالثة (خطوة الموافقات)
شاشة الموافقات في نظام البسيط ويب لها دور محوري في ضبط سير المستندات داخل النظام، وإليك وصفها:

#### الوصف العام
- شاشة مخصصة لإدارة عمليات الموافقة على المستندات (مثل الفواتير، القيود، العروض…).
- تمكّن المستخدمين المصرّح لهم من الموافقة أو الرفض حسب المراحل المعرفة مسبقًا في شاشة تعريف الموافقات ومراحلها.

#### الوظائف الرئيسية
1. **عرض المستندات التي بانتظار الموافقة**، مع بيان المرحلة الحالية.
2. **إجراء الموافقة أو الرفض على المستند**:
   - زر موافقة.
   - زر رفض مع إمكانية إضافة ملاحظة توضح السبب.
3. **متابعة سير الموافقات**: يظهر للمستخدم أين وصل المستند في مراحله.
4. **إشعارات للمستخدمين** عند وجود مستندات تحتاج لموافقتهم.

#### عناصر الواجهة
- **جدول يعرض**:
  - رقم المستند.
  - نوع المستند.
  - المرحلة الحالية.
  - المسؤولون عن الموافقة.
  - الحالة (معلق / مقبول / مرفوض).
- **أزرار التحكم**:
  - موافقة.
  - رفض.
  - إضافة ملاحظة.
- **شريط تنقل يوضح المسار** (النشاط → القسم → الموافقات).

#### قواعد العمل
- إذا بلغ المستند العدد المطلوب من الموافقات ➝ ينتقل مباشرة إلى المرحلة التالية.
- إذا رفض عضو واحد فقط ➝ يتوقف المسار ويعتبر المستند مرفوضًا.

──────────────────────────────────────────────────

